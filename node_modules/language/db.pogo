language = require './'

rdsl = language {
    r = 'r'
}

ups = []

db = language {
    migrations = language {
        up (block) =
            ups.push (rdsl.prepare (block))
    }
}

db
    migrations
        up
            console.log (r)

        down
            console.log (r)

for each @(up) in (ups)
    up()
